# ğŸ€ å¥ˆå¶çš„åª’ä½“æ•´ç†åŠ©æ‰‹ - Docker Compose é…ç½®
# 
# ä½¿ç”¨æ–¹æ³•:
# 1. å¤åˆ¶ .env.example ä¸º .env å¹¶å¡«å†™é…ç½®
# 2. è¿è¡Œ: docker-compose up -d
# 3. è®¿é—®: http://localhost:3000

version: '3.8'

services:
  nanoha-media-agent:
    build: .
    image: nanoha-media-agent:latest
    container_name: nanoha-media-agent
    ports:
      - "3000:3000"
    environment:
      - LLM_API_KEY=${LLM_API_KEY}
      - LLM_BASE_URL=${LLM_BASE_URL:-}
      - LLM_MODEL=${LLM_MODEL:-gpt-4o}
      - TMDB_API_KEY=${TMDB_API_KEY}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3000/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

